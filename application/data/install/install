-- phpMyAdmin SQL Dump
-- version 3.5.1
-- http://www.phpmyadmin.net
--
-- Хост: localhost
-- Время создания: Ноя 16 2012 г., 00:07
-- Версия сервера: 5.5.25
-- Версия PHP: 5.4.4

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- База данных: `install`
--

-- --------------------------------------------------------

--
-- Структура таблицы `menu`
--

CREATE TABLE `menu` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `orderid` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `url` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `orderid` (`orderid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_config`
--

CREATE TABLE `z_config` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `crated_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `title` varchar(255) NOT NULL,
  `sid` varchar(255) NOT NULL,
  `type` varchar(255) NOT NULL,
  `value` text NOT NULL,
  PRIMARY KEY (`id`),
  KEY `crated_on` (`crated_on`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=20 ;

--
-- Дамп данных таблицы `z_config`
--

INSERT INTO `z_config` (`id`, `crated_on`, `title`, `sid`, `type`, `value`) VALUES
(6, '2010-04-20 05:16:04', 'Копирайты', 'copy', 'text', '<a href="http://made7.ru">Верстка и программирование</a> Студия MADE7<br />\r\n<strong>©MADE 2012</strong>'),
(13, '2010-05-15 03:13:48', 'Текст страницы ошибки', 'error_text', 'html', '<p>Здравствуйте!</p>\r\n<p>К сожалению запрашиваемая Вами страница не существует на нашем сайте.</p>\r\n<p>Это могло произойти по одной из причин:</p>\r\n<ul>\r\n<li>Вы ошиблись при наборе адреса страницы</li>\r\n<li>Перешли по неработающей(битой) ссылке</li>\r\n<li>Запрашиваемая страница была удалена</li>\r\n</ul>\r\n<p>Мы просим прощения за предоставленные неудобства и предлагаем следующие варианты:</p>\r\n<ul>\r\n<li>вернуться назад при помощи кнопки браузера back</li>\r\n<li>проверить правильность написания адреса страницы(URL) в адресной строке браузера</li>\r\n<li>перейти на <a href="/">главную страницу</a> сайта</li>\r\n<li>посетить основные разделы сайта используя главное меню сайта</li>\r\n</ul>\r\n<p>Если Вы уверены в правильности набранного адреса страницы и считаете, что эта ошибка произошла по нашей вине, пожалуйста, сообщите об этом нам при помощи <a href="/feedback">формы обратной связи</a>.</p>'),
(16, '2010-05-31 03:09:16', 'Счетчик', 'counter', 'text', ''),
(18, '2010-06-01 05:26:25', 'E-Mail администратора', 'email', 'string', ''),
(19, '2011-03-03 02:47:56', 'robots.txt', 'robots.txt', 'text', 'User-agent:*\r\nDisallow: /redirect*\r\nDisallow: /captcha*\r\n\r\nUser-agent: Yandex\r\nDisallow: /redirect*\r\nDisallow: /captcha*\r\n');

-- --------------------------------------------------------

--
-- Структура таблицы `z_dbtables`
--

CREATE TABLE `z_dbtables` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Дамп данных таблицы `z_dbtables`
--

INSERT INTO `z_dbtables` (`id`, `title`) VALUES
(1, 'menu');

-- --------------------------------------------------------

--
-- Структура таблицы `z_dbtables_fields`
--

CREATE TABLE `z_dbtables_fields` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dbtable_id` int(11) NOT NULL,
  `orderid` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `type` varchar(255) NOT NULL,
  `len` int(11) NOT NULL,
  `default` varchar(255) NOT NULL,
  `default_value` varchar(255) NOT NULL,
  `is_null` int(1) NOT NULL DEFAULT '0',
  `is_index` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `dbtable_id` (`dbtable_id`),
  KEY `orderid` (`orderid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

--
-- Дамп данных таблицы `z_dbtables_fields`
--

INSERT INTO `z_dbtables_fields` (`id`, `dbtable_id`, `orderid`, `title`, `type`, `len`, `default`, `default_value`, `is_null`, `is_index`) VALUES
(1, 1, 1, 'orderid', 'int', 11, 'no', '', 0, 1),
(2, 1, 2, 'title', 'varchar', 255, 'no', '', 0, 0),
(3, 1, 3, 'url', 'varchar', 255, 'no', '', 0, 0);

-- --------------------------------------------------------

--
-- Структура таблицы `z_geo_areas`
--

CREATE TABLE `z_geo_areas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `area` varchar(255) DEFAULT NULL,
  `z_geo_districts_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_z_geo_areas_z_geo_districts1` (`z_geo_districts_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_geo_blocks`
--

CREATE TABLE `z_geo_blocks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `start` int(12) unsigned DEFAULT NULL,
  `stop` int(12) unsigned DEFAULT NULL,
  `z_geo_cityes_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `start` (`start`),
  KEY `stop` (`stop`),
  KEY `fk_z_geo_ip_z_geo_cityes1` (`z_geo_cityes_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_geo_cityes`
--

CREATE TABLE `z_geo_cityes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city` varchar(255) DEFAULT NULL,
  `z_geo_areas_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_z_geo_cityes_z_geo_areas1` (`z_geo_areas_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_geo_districts`
--

CREATE TABLE `z_geo_districts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `district` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_log`
--

CREATE TABLE `z_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `priorityName` varchar(16) NOT NULL,
  `priority` tinyint(4) DEFAULT NULL,
  `message` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `priority` (`priority`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_mails`
--

CREATE TABLE `z_mails` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sid` varchar(255) CHARACTER SET cp1251 NOT NULL,
  `title` varchar(255) CHARACTER SET cp1251 NOT NULL,
  `description` text CHARACTER SET cp1251 NOT NULL,
  `message` text CHARACTER SET cp1251 NOT NULL,
  `from` varchar(255) CHARACTER SET cp1251 NOT NULL,
  `to` varchar(255) CHARACTER SET cp1251 NOT NULL,
  `theme` varchar(255) CHARACTER SET cp1251 NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `sid` (`sid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Дамп данных таблицы `z_mails`
--

INSERT INTO `z_mails` (`id`, `sid`, `title`, `description`, `message`, `from`, `to`, `theme`) VALUES
(1, 'feedback_admin', 'Шаблон письма администратору при отправке формы обратной связи', '<div>\r\n<p>{{fio}} - ФИО</p>\r\n</div>\r\n<p>{{email}} - email отправителя</p>\r\n<div>\r\n<p>{{text}} - текст письма</p>\r\n</div>', '<p><strong>Вам написал(а) на сайте письмо </strong>{{fio}}</p>\r\n<p>email отправителя: {{email}}</p>\r\n<p>текст письма:</p>\r\n<p>{{text}}</p>', '', '', 'Новое письмо на сайте!');

-- --------------------------------------------------------

--
-- Структура таблицы `z_menu`
--

CREATE TABLE `z_menu` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `orderid` int(11) DEFAULT NULL,
  `parentid` int(11) DEFAULT NULL,
  `title` varchar(45) DEFAULT NULL,
  `controller` varchar(45) DEFAULT NULL,
  `action` varchar(45) DEFAULT NULL,
  `visible` tinyint(4) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `orderid` (`orderid`),
  KEY `parentid` (`parentid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=38 ;

--
-- Дамп данных таблицы `z_menu`
--

INSERT INTO `z_menu` (`id`, `orderid`, `parentid`, `title`, `controller`, `action`, `visible`) VALUES
(3, 3, 0, 'Настройки', 'z_config', 'list', 1),
(4, 5, 0, 'Публикации', 'z_statpage', 'list', 1),
(5, 20, 0, 'Структура', 'structure', '', 1),
(6, 12, 5, 'Меню админки', 'z_menuconstructor', 'list', 1),
(7, 22, 0, 'Участники', 'partyes', '', 1),
(8, 8, 7, 'Пользователи', 'z_users', 'list', 1),
(9, 9, 7, 'Роли', 'acl_roles', 'list', 1),
(10, 10, 7, 'Ресурсы', 'acl_resources', 'list', 1),
(11, 11, 7, 'Привилегии', 'acl_privileges', 'list', 1),
(12, 19, 5, 'База данных', 'z_database', '', 1),
(19, 6, 5, 'Сео', 'z_seo', 'list', 1),
(21, 21, 5, 'Структура', 'z_structure', 'list', 1),
(25, 7, 0, 'Шаблоны писем', 'z_mails', 'list', 1),
(37, 37, 0, 'Очистить кэш', 'z_cleancache', 'index', 1);

-- --------------------------------------------------------

--
-- Структура таблицы `z_privileges`
--

CREATE TABLE `z_privileges` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `title` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=9 ;

--
-- Дамп данных таблицы `z_privileges`
--

INSERT INTO `z_privileges` (`id`, `name`, `title`) VALUES
(1, 'add', 'Добавление'),
(2, 'edit', 'Редактирование'),
(3, 'delete', 'Удаление'),
(4, 'list', 'Просмотр'),
(6, 'reorder', 'Перемещение'),
(7, '', 'Все'),
(8, 'view_menu', 'Просмотр пункта меню');

-- --------------------------------------------------------

--
-- Структура таблицы `z_privileges_connect`
--

CREATE TABLE `z_privileges_connect` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `privilege_id` int(11) NOT NULL,
  `rule_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_privilege_id` (`privilege_id`),
  KEY `fk_rule_id` (`rule_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=160 ;

--
-- Дамп данных таблицы `z_privileges_connect`
--

INSERT INTO `z_privileges_connect` (`id`, `privilege_id`, `rule_id`) VALUES
(97, 7, 29),
(108, 7, 38),
(109, 7, 39),
(110, 7, 41),
(112, 1, 43),
(113, 3, 43),
(114, 7, 44),
(143, 1, 45),
(144, 3, 45),
(145, 7, 46),
(157, 7, 42),
(158, 7, 47),
(159, 7, 48);

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources`
--

CREATE TABLE `z_resources` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `resourceId` varchar(255) NOT NULL,
  `actionId` varchar(255) NOT NULL DEFAULT '',
  `parentid` int(11) DEFAULT '0',
  `orderid` int(11) NOT NULL DEFAULT '0',
  `title` varchar(255) NOT NULL,
  `model` varchar(255) NOT NULL,
  `datatype` varchar(255) NOT NULL,
  `indexate` varchar(255) NOT NULL,
  `default_field` varchar(255) NOT NULL,
  `parent_field` varchar(255) NOT NULL,
  `order` varchar(255) NOT NULL,
  `group` varchar(255) NOT NULL,
  `paginate` int(11) NOT NULL,
  `can_delete` int(1) NOT NULL DEFAULT '1',
  `can_edit` int(1) NOT NULL DEFAULT '1',
  `can_add` int(1) NOT NULL DEFAULT '1',
  `delete_confirm` int(1) NOT NULL DEFAULT '1',
  `delete_on_have_child` int(1) NOT NULL DEFAULT '0',
  `sortable` int(1) NOT NULL DEFAULT '0',
  `sortable_position` varchar(255) NOT NULL,
  `visible` int(1) NOT NULL DEFAULT '1',
  `on_have_subcat` int(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE KEY `resourceId` (`resourceId`),
  KEY `parentid` (`parentid`),
  KEY `orderid` (`orderid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=80 ;

--
-- Дамп данных таблицы `z_resources`
--

INSERT INTO `z_resources` (`id`, `resourceId`, `actionId`, `parentid`, `orderid`, `title`, `model`, `datatype`, `indexate`, `default_field`, `parent_field`, `order`, `group`, `paginate`, `can_delete`, `can_edit`, `can_add`, `delete_confirm`, `delete_on_have_child`, `sortable`, `sortable_position`, `visible`, `on_have_subcat`) VALUES
(8, 'z_users', 'list', 24, 8, 'Пользователи', 'Z_Model_Users', 'band', '', 'login', '', 'login asc', '', 15, 1, 1, 1, 1, 0, 0, '', 1, 1),
(11, 'acl_roles', 'list', 24, 11, 'Роли', 'Z_Model_Roles', 'band', '', 'title', '', 'title asc', '', 15, 1, 1, 1, 1, 0, 0, '', 1, 1),
(12, 'acl_resources', 'list', 23, 34, 'Ресурсы', 'Z_Model_Resources', 'catalog', '', 'title', '', 'orderid', '', 15, 1, 1, 1, 1, 0, 1, 'bottom', 1, 1),
(13, 'acl_privileges', 'list', 24, 13, 'Привилегии', 'Z_Model_Privileges', 'band', '', 'title', '', 'title asc', '', 15, 1, 1, 1, 1, 0, 0, '', 1, 1),
(18, 'acl_parentroles', '', 11, 18, 'Родительские роли', 'Z_Model_Roles_Connect', 'band', '', 'child_role_id', 'child_role_id', '', '', 15, 1, 1, 1, 1, 0, 1, 'bottom', 0, 1),
(19, 'acl_rules', '', 11, 19, 'Правила', 'Z_Model_Rules', 'band', '', 'id', 'role_id', 'title asc', '', 15, 1, 1, 1, 1, 0, 0, '', 0, 1),
(21, 'z_statpage', 'list', 53, 32, 'Публикации', 'Z_Model_Statpage', 'band', '', 'title', '', 'title', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(22, 'z_config', 'list', 53, 7, 'Настройки', 'Z_Model_Config', 'band', '', 'title', '', 'title asc', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(23, 'adminstrucsure', '', 0, 53, 'Конструктор', '', 'band', '', '', '', '', '', 0, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(24, 'partyes', '', 0, 49, 'Участники', '', 'band', '', '', '', '', '', 0, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(31, 'filemanager', '', 0, 69, 'Файловый менеджер', '', 'band', '', '', '', '', '', 0, 1, 1, 1, 1, 0, 0, 'bottom', 0, 1),
(32, 'z_seo', 'list', 0, 31, 'SEO', 'Z_Model_Titles', 'band', '', 'title', '', '', '', 15, 1, 1, 1, 1, 0, 1, 'bottom', 1, 1),
(49, 'z_cleancache', '', 53, 82, 'Очистить кэш', '', '', '', '', '', '', '', 0, 1, 1, 1, 1, 0, 0, '', 1, 1),
(50, '', '', 0, 73, 'Все', '', '', '', '', '', '', '', 0, 1, 1, 1, 1, 0, 0, '', 0, 1),
(53, 'site', '', 0, 26, 'Сайт', '', 'band', '', '', '', '', '', 0, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(57, 'z_mails', 'list', 53, 78, 'Шаблоны писем', 'Z_Model_Mails', 'band', '', 'title', '', 'title asc', '', 15, 1, 1, 1, 1, 0, 0, '', 1, 1),
(59, 'acl_resourcecolumns', 'list', 12, 59, 'Колонки', 'Z_Model_Resourcecolumns', 'band', '', 'title', 'resourceid', 'orderid', '', 15, 1, 1, 1, 1, 0, 1, 'bottom', 0, 1),
(60, 'acl_resourceconditions', 'list', 12, 61, 'Условия', 'Z_Model_Resourceconditions', 'band', '', 'condition', 'resourceid', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 0, 1),
(61, 'acl_resourcejoins', 'list', 12, 64, 'Джойны', 'Z_Model_Resourcejoins', 'band', '', 'model', 'resourceid', 'orderid', '', 15, 1, 1, 1, 1, 0, 1, 'bottom', 0, 1),
(62, 'acl_resourceforms', 'list', 12, 60, 'Форма', 'Z_Model_Resourceforms', 'band', '', 'label', 'resourceid', 'orderid', '', 20, 1, 1, 1, 1, 0, 1, 'bottom', 0, 1),
(63, 'acl_resourceformsparams', 'list', 62, 63, 'Параметры', 'Z_Model_Resourceformsparams', 'band', '', 'title', 'formid', 'title', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 0, 1),
(64, 'acl_resourcerefers', 'list', 12, 62, 'Связи', 'Z_Model_Resourcerefers', 'band', '', 'field', 'resourceid', 'field', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 0, 1),
(65, 'acl_resourcebuttons', 'list', 12, 65, 'Кнопки', 'Z_Model_Resourcebuttons', 'band', '', 'title', 'resourceid', 'orderid', '', 15, 1, 1, 1, 1, 0, 1, 'bottom', 0, 1),
(66, 'z_dbtables', 'list', 23, 66, 'Конструктор БД', 'Z_Model_Dbtables', 'band', '', 'title', '', 'title asc', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(67, 'z_dbtablesfields', 'list', 66, 67, 'Поля', 'Z_Model_Dbtablesfields', 'band', '', 'title', 'dbtable_id', 'orderid', '', 15, 1, 1, 1, 1, 0, 1, 'bottom', 0, 1),
(71, 'system', '', 0, 68, 'Система', '', 'band', '', 'title', '', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(72, 'z_phpinfo', 'index', 71, 71, 'PHPinfo', '', 'band', '', 'title', '', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(74, 'z_adminpanel', 'list', 0, 80, 'Панель администрирования сайта', '', 'band', '', 'title', '', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 0, 1),
(75, 'menu', 'list', 53, 21, 'Меню', 'Site_Model_Menu', 'band', '', 'title', '', 'orderid', '', 20, 1, 1, 1, 1, 0, 1, 'bottom', 1, 1),
(76, 'filesystem', 'index', 23, 75, 'Файловый менеджер', '', 'band', '', 'title', '', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(77, 'z_updates', 'index', 0, 143, 'Обновления', '', 'band', '', 'title', '', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(78, 'z_backups', 'list', 0, 143, 'Резервные копии', '', 'band', '', 'title', '', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1),
(79, 'z_dbadmin', 'index', 71, 145, 'Db', '', 'band', '', 'title', '', 'id', '', 15, 1, 1, 1, 1, 0, 0, 'bottom', 1, 1);

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources_buttons`
--

CREATE TABLE `z_resources_buttons` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `orderid` int(11) NOT NULL,
  `resourceid` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `url` text NOT NULL,
  `class` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `orderid` (`orderid`),
  KEY `resourceid` (`resourceid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Дамп данных таблицы `z_resources_buttons`
--

INSERT INTO `z_resources_buttons` (`id`, `orderid`, `resourceid`, `title`, `url`, `class`) VALUES
(1, 1, 66, 'Сгенерировать', 'return array();', '');

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources_columns`
--

CREATE TABLE `z_resources_columns` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `orderid` int(11) NOT NULL,
  `resourceid` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `width` varchar(255) NOT NULL,
  `field` varchar(255) NOT NULL,
  `orderlink` int(1) NOT NULL DEFAULT '0',
  `template` text NOT NULL,
  `filter_query` varchar(255) NOT NULL,
  `filter_items` text NOT NULL,
  `eval` text NOT NULL,
  `escape` int(11) NOT NULL,
  `on_have_subcat` int(1) NOT NULL DEFAULT '1',
  `visible` int(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=48 ;

--
-- Дамп данных таблицы `z_resources_columns`
--

INSERT INTO `z_resources_columns` (`id`, `orderid`, `resourceid`, `title`, `width`, `field`, `orderlink`, `template`, `filter_query`, `filter_items`, `eval`, `escape`, `on_have_subcat`, `visible`) VALUES
(6, 6, 21, 'Название', '', 'title', 0, '', '', '', '', 0, 1, 1),
(7, 7, 21, 'Идентификатор', '', 'sid', 0, '', '', '', '', 0, 1, 1),
(8, 8, 21, 'Адрес', '', 'url', 0, '/page/{{sid}}', '', '', '', 0, 1, 1),
(9, 9, 22, 'Название', '', 'title', 1, '', 'title LIKE ?', '', '', 0, 1, 1),
(10, 10, 22, 'Идентификатор', '', 'sid', 0, '', '', '', '', 0, 1, 1),
(11, 11, 57, 'Название', '', 'title', 0, '', '', '', '', 0, 1, 1),
(12, 12, 57, 'Идентификатор', '', 'sid', 0, '', '', '', '', 0, 1, 1),
(13, 13, 8, 'Логин', '50%', 'login', 1, '', 'login LIKE ?', '', '', 0, 1, 1),
(14, 14, 8, 'Роль', '', 'rolename', 1, '', 'z_roles.id LIKE ?', '$rolesModel = new Z_Model_Roles();\r\n\r\nreturn $rolesModel->fetchPairs();', '', 0, 1, 1),
(15, 15, 11, 'Роль', '', 'title', 1, '{{title}} ({{roleId}})', 'title LIKE ?', '', '', 0, 1, 1),
(16, 16, 19, 'Ресурс', '50%', 'title', 1, '', 'title LIKE ?', '', '', 0, 1, 1),
(17, 17, 19, 'Правило', '', 'rule', 0, '', 'rule = ?', 'return array(''allow''=>''Разрешено'',''deny''=>''Запрещено'');', 'return "{{rule}}"=="allow"?"Разрешено":"Запрещено";', 0, 1, 1),
(18, 18, 18, 'Роль', '', 'title', 0, '', '', '', '', 0, 1, 1),
(19, 19, 13, 'Привилегия', '', 'title', 0, '', '', '', '', 0, 1, 1),
(20, 20, 32, 'Адрес', '', 'uri', 0, '', '', '', '', 0, 1, 1),
(21, 21, 32, 'Заголовок', '', 'title', 0, '', '', '', '', 0, 1, 1),
(23, 22, 62, 'Название', '', 'label', 0, '', '', '', '', 0, 1, 1),
(24, 24, 59, 'Название', '30%', 'title', 0, '', '', '', '', 0, 1, 1),
(25, 32, 59, 'Поле', '20%', 'field', 0, '', '', '', '', 0, 1, 1),
(26, 33, 59, 'Ширина', '', 'width', 0, '', '', '', '', 0, 1, 1),
(27, 27, 62, 'Тип', '', 'type', 0, '', '', '', '', 0, 1, 1),
(28, 23, 62, 'Поле', '', 'field', 0, '', '', '', '', 0, 1, 1),
(29, 23, 63, 'Имя параметра', '30%', 'title', 0, '', '', '', '', 0, 1, 1),
(30, 24, 63, 'Значение', '', 'value', 0, '<pre>{{value}}</pre>', '', '', '', 0, 1, 1),
(31, 25, 60, 'Условие', '50%', 'condition', 0, '', '', '', '', 0, 1, 1),
(32, 26, 60, 'Значение', '', 'value', 0, '', '', '', '', 0, 1, 1),
(33, 27, 61, 'Модель', '30%', 'model', 0, '', '', '', '', 0, 1, 1),
(34, 28, 61, 'Условие', '30%', 'condition', 0, '', '', '', '', 0, 1, 1),
(35, 29, 61, 'Поля', '', 'fields', 0, '', '', '', '', 0, 1, 1),
(36, 30, 64, 'Поле', '', 'field', 0, '', '', '', '', 0, 1, 1),
(37, 31, 64, 'Модель', '', 'model', 0, '', '', '', '', 0, 1, 1),
(38, 34, 65, 'Название', '', 'title', 0, '', '', '', '', 0, 1, 1),
(39, 35, 66, 'Название таблицы', '50%', 'title', 0, '', 'title LIKE ?', '', '', 0, 1, 1),
(40, 36, 67, 'Поле', '', 'title', 0, '', '', '', '', 0, 1, 1),
(41, 37, 67, 'Тип', '', 'type1', 0, '{{type}} ({{len}})', '', '', '', 0, 1, 1),
(43, 38, 66, 'Запустить конструктор', '20%', 'run', 0, '', '', '', 'if (in_array(''{{title}}'',Z_Db_Table::getDefaultAdapter()->listTables()))\n	return ''<a href="''.$this->url(array(''action''=>''rebuild'',''id''=>{{id}})).''" class="z-ajax">Модифицировать<a>'';\nelse\n	return ''<a href="''.$this->url(array(''action''=>''build'',''id''=>{{id}})).''" class="z-ajax">Запустить конструктор<a>'';', 0, 1, 1),
(45, 39, 67, 'Индекс', '', 'is_index1', 0, '', '', '', 'return ''{{is_index}}''?''Да'':'''';', 0, 1, 1),
(46, 40, 75, 'Заголовок', '', 'title', 0, '', '', '', '', 1, 1, 1),
(47, 41, 75, 'Ссылка', '', 'url', 0, '', '', '', '', 1, 1, 1);

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources_conditions`
--

CREATE TABLE `z_resources_conditions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `resourceid` int(11) NOT NULL,
  `condition` varchar(255) NOT NULL,
  `value` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `recourceid` (`resourceid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;

--
-- Дамп данных таблицы `z_resources_conditions`
--

INSERT INTO `z_resources_conditions` (`id`, `resourceid`, `condition`, `value`) VALUES
(5, 8, 'login!=?', 'guest');

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources_forms`
--

CREATE TABLE `z_resources_forms` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `resourceid` int(11) NOT NULL,
  `orderid` int(11) NOT NULL,
  `type` varchar(255) NOT NULL,
  `field` varchar(255) NOT NULL,
  `label` varchar(255) NOT NULL,
  `required` int(1) NOT NULL DEFAULT '0',
  `value` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `only_for_root` int(1) NOT NULL DEFAULT '0',
  `show_check` text NOT NULL,
  `is_file` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `resourceid` (`resourceid`),
  KEY `orderid` (`orderid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=109 ;

--
-- Дамп данных таблицы `z_resources_forms`
--

INSERT INTO `z_resources_forms` (`id`, `resourceid`, `orderid`, `type`, `field`, `label`, `required`, `value`, `description`, `only_for_root`, `show_check`, `is_file`) VALUES
(1, 21, 1, 'Text', 'title', 'Название', 1, '', '', 0, '', 0),
(2, 21, 2, 'text', 'sid', 'Идентификатор', 1, '', '', 1, '', 0),
(3, 21, 3, 'mce', 'text', 'Текст', 1, '', '', 0, '', 0),
(4, 21, 4, 'checkbox', 'z_can_delete', 'Разрешить удалять?', 0, '1', '', 1, '', 0),
(5, 22, 5, 'Text', 'title', 'Название', 1, '', '', 1, '', 0),
(6, 22, 6, 'text', 'sid', 'Идентификатор', 1, '', '', 1, '', 0),
(7, 22, 7, 'select', 'type', 'Тип', 1, '', '', 1, '', 0),
(8, 57, 8, 'text', 'title', 'Название', 1, '', '', 0, '', 0),
(9, 57, 9, 'text', 'sid', 'Идентификатор', 1, '', '', 1, '', 0),
(10, 57, 10, 'mce', 'description', 'Описание', 1, '', '', 1, '', 0),
(11, 57, 11, 'mce', 'message', 'Шаблон сообщения', 1, '', '', 0, '', 0),
(12, 57, 12, 'text', 'theme', 'Тема', 1, '', '', 0, '', 0),
(13, 57, 13, 'text', 'from', 'От кого', 0, '', 'Если не указано, то берется из настроек', 0, '', 0),
(14, 57, 14, 'text', 'to', 'Кому', 0, '', 'Если не указано, то берется из настроек', 0, '', 0),
(17, 8, 15, 'text', 'login', 'Логин', 1, '', '', 0, '', 0),
(18, 8, 16, 'password', 'password', 'Пароль', 0, '', 'Если не указывать, то он останется прежним', 0, '', 0),
(19, 8, 17, 'select', 'role_id', 'Роль', 1, '', '', 0, '', 0),
(20, 11, 18, 'text', 'title', 'Название', 1, '', '', 0, '', 0),
(21, 11, 19, 'text', 'roleId', 'Идентификатор', 1, '', '', 0, '', 0),
(22, 19, 20, 'select', 'resource_id', 'Ресурс', 1, '', '', 0, '', 0),
(23, 19, 21, 'multiCheckbox', 'privileges', 'Привилегия', 0, '', '', 0, '', 0),
(24, 19, 22, 'select', 'rule', 'Правило', 1, '', '', 0, '', 0),
(25, 18, 23, 'select', 'parent_role_id', 'Родительская роль', 1, '', '', 0, '', 0),
(26, 13, 24, 'text', 'title', 'Название', 1, '', '', 0, '', 0),
(27, 13, 25, 'text', 'name', 'Идентификатор', 0, '', '', 0, '', 0),
(28, 32, 26, 'text', 'uri', 'Адрес', 1, '', 'Адрес страницы относительно корня сайта. Должен начинаться с символа "/"', 0, '', 0),
(29, 32, 27, 'text', 'title', 'Заголовок', 0, '', '', 0, '', 0),
(30, 32, 28, 'Checkbox', 'title_block', 'Добавлять к существующему заголовку', 0, '1', '', 0, '', 0),
(31, 32, 29, 'text', 'description', 'description', 0, '', '', 0, '', 0),
(32, 32, 30, 'Checkbox', 'description_block', 'Добавлять к существующему description', 0, '', '', 0, '', 0),
(33, 32, 31, 'text', 'keywords', 'keywords', 0, '', '', 0, '', 0),
(34, 32, 32, 'Checkbox', 'keywords_block', 'Добавлять к существующему keywords', 0, '', '', 0, '', 0),
(35, 11, 33, 'checkbox', 'z_can_delete', 'Возможно удалять?', 0, '', '', 1, '', 0),
(36, 12, 0, 'text', 'title', 'Название', 1, '', '', 0, '', 0),
(37, 12, 36, 'text', 'resourceId', 'Идентификатор', 1, '', '', 0, '', 0),
(38, 12, 37, 'text', 'actionId', 'Действие', 0, 'list', '', 0, '', 0),
(39, 12, 38, 'select', 'parentid', 'Родитель', 1, '', '', 0, 'return $this->_getParam(''action'')==''edit'';', 0),
(40, 12, 39, 'Checkbox', 'visible', 'Видимый в меню?', 0, '1', '', 0, '', 0),
(41, 12, 41, 'select', 'model', 'Модель', 0, '', '', 0, '', 0),
(42, 12, 42, 'Select', 'datatype', 'Тип', 1, '', '', 0, '', 0),
(43, 12, 43, 'text', 'default_field', 'Поле по умолчанию', 0, 'title', '', 0, '', 0),
(44, 12, 46, 'text', 'order', 'Сортировка', 0, 'id', '<p>Список полей для сортировки, разделяемый символом ";"</p>', 0, '', 0),
(45, 12, 47, 'text', 'group', 'Группировка', 0, '', '', 0, '', 0),
(46, 12, 48, 'text', 'paginate', 'Постраничность', 1, '15', '', 0, '', 0),
(47, 12, 49, 'Checkbox', 'can_delete', 'Разрешить удалять?', 0, '1', '', 0, '', 0),
(48, 12, 50, 'Checkbox', 'can_edit', 'Разрешить редактировать?', 0, '1', '', 0, '', 0),
(49, 12, 51, 'Checkbox', 'can_add', 'Разрешить добавлять?', 0, '1', '', 0, '', 0),
(50, 12, 52, 'Checkbox', 'delete_confirm', 'Подтверждение удаления?', 0, '1', '', 0, '', 0),
(51, 12, 53, 'Checkbox', 'delete_on_have_child', 'Удалять при наличии детей?', 0, '0', '', 0, '', 0),
(52, 12, 54, 'Checkbox', 'sortable', 'Сортируемый?', 0, '0', '', 0, '', 0),
(53, 12, 96, 'Select', 'sortable_position', 'Позиция при добавлении', 0, '', 'Работает только в сортируемых каталогах и списках', 0, '', 0),
(54, 12, 44, 'text', 'parent_field', 'Родительское поле', 0, '', 'Используется, если вы хотите установить связь с родительской таблицей. В этом случае родительской таблицей является таблица модели родительского ресурса.', 0, '', 0),
(55, 62, 57, 'Select', 'type', 'Тип', 1, 'text', '', 0, '', 0),
(56, 62, 56, 'text', 'field', 'Поле', 1, '', '', 0, '', 0),
(57, 62, 55, 'text', 'label', 'Название (label)', 1, '', '', 0, '', 0),
(58, 62, 58, 'Checkbox', 'required', 'Обязательное', 0, '1', '', 0, '', 0),
(59, 62, 59, 'text', 'value', 'Значение по умолчанию', 0, '', '', 0, '', 0),
(60, 62, 60, 'mce', 'description', 'Описание', 0, '', '', 0, '', 0),
(61, 62, 62, 'Checkbox', 'only_for_root', 'Видно только для суперпользователя', 0, '0', '', 0, '', 0),
(62, 62, 94, 'EditArea', 'show_check', 'Функция проверки доступности', 0, '', '<p>PHP функция. Если возвращает false, то поле будет недоступно.</p>', 0, '', 0),
(63, 59, 63, 'text', 'title', 'Название', 1, '', '', 0, '', 0),
(64, 59, 64, 'text', 'field', 'Поле в БД', 1, '', '', 0, '', 0),
(65, 59, 65, 'text', 'width', 'Ширина', 0, '', '', 0, '', 0),
(66, 59, 68, 'checkbox', 'orderlink', 'Использовать для сортировки', 1, '', '', 0, '', 0),
(67, 59, 69, 'text', 'template', 'Шаблон', 0, '', '', 0, '', 0),
(68, 59, 70, 'EditArea', 'eval', 'eval', 0, '', '', 0, '', 0),
(69, 59, 95, 'Text', 'filter_query', 'Фильтр', 0, '', '<p>Условие для SQL.</p>\r\n<p>Пример: "id=?" или "title LIKE ?" - для одиночного фильтра и "id IN (?)" - для множественного</p>', 0, '', 0),
(70, 59, 97, 'EditArea', 'filter_items', 'Элементы для фильтра с выбором', 0, '', '<p>Этот PHP код должен вернуть ассоцитиативный массив.</p>', 0, '', 0),
(71, 63, 71, 'text', 'title', 'Имя параметра', 1, '', '', 0, '', 0),
(72, 63, 72, 'EditArea', 'value', 'Значение', 1, '', '', 0, '', 0),
(73, 63, 73, 'checkbox', 'is_eval', 'PHP код', 0, '1', '', 0, '', 0),
(74, 60, 74, 'text', 'condition', 'Условие', 1, '', '', 0, '', 0),
(75, 60, 75, 'text', 'value', 'Значение', 1, '', '', 0, '', 0),
(76, 61, 76, 'select', 'model', 'Модель', 1, '', '', 0, '', 0),
(77, 61, 77, 'text', 'condition', 'Условие', 1, '', '<p>Условие присоединения в SQL винтаксисе.&nbsp;Возможно применение шаблона:</p>\n<p>{{table}} - таблица текущей модели</p>\n<p>{{jointable}} - таблица присоединяемой модели</p>\n<p>Пример: {{table}}.id={{jointable}}.tableid</p>', 0, '', 0),
(78, 61, 78, 'text', 'fields', 'Поля', 1, '', '<p>Блоки разделяются символом ";"<br />Каждый блок содержит поле таблицы и имя этого поля в запросе<br />Например: title|mytitle;shop|shopname</p>', 0, '', 0),
(79, 64, 79, 'select', 'model', 'Модель', 1, '', '', 0, '', 0),
(80, 64, 80, 'text', 'field', 'Поле', 1, '', '', 0, '', 0),
(81, 64, 81, 'text', 'field1', 'Поле для связи на текущую таблицу', 1, '', '', 0, '', 0),
(82, 64, 82, 'text', 'field2', 'Поле для связи на таблицу указанной модели', 1, '', '', 0, '', 0),
(83, 65, 83, 'Text', 'title', 'Название', 1, '', '', 0, '', 0),
(84, 65, 84, 'EditArea', 'url', 'Ссылка', 1, '', '<p>php код, адрес ссылки</p>', 0, '', 0),
(85, 65, 85, 'Text', 'class', 'Класс', 0, '', '<p>класс тега в html коде</p>', 0, '', 0),
(86, 66, 86, 'Text', 'title', 'Название', 1, '', '', 0, '', 0),
(87, 67, 87, 'Text', 'title', 'Название', 1, '', '', 0, '', 0),
(88, 67, 88, 'Select', 'type', 'Тип', 1, '', '', 0, '', 0),
(89, 67, 89, 'Text', 'len', 'Длина', 0, '', '', 0, '', 0),
(91, 67, 90, 'Select', 'default', 'По умолчанию', 1, '', '', 0, '', 0),
(92, 67, 91, 'Text', 'default_value', 'Значение по умолчанию', 0, '', '', 0, '', 0),
(93, 67, 92, 'Checkbox', 'is_null', 'NULL', 0, '', '', 0, '', 0),
(94, 67, 93, 'Checkbox', 'is_index', 'Индекс', 0, '', '', 0, '', 0),
(97, 62, 61, 'Checkbox', 'is_file', 'Файловый элемент формы?', 0, '0', '<p>Действует только для типа "Файл". Если флажок установлен, то при удалении элемента, будет удален и сопутствующий файл. Ни в коем случае не устанавливать этот флажок у нефайловых элементов формы, то есть тех, работа которых связана с работой файлового хранилища Z_File_Storage!</p>', 0, '', 0),
(98, 59, 98, 'Checkbox', 'on_have_subcat', 'Показывать для разделов', 1, '1', '<p>Только для каталога.</p>\n<p>Если флажок установлен, то эта колонка будет показываться для всех разделов каталога.</p>\n<p>Если флажок снят, то колонка будет показываться только для "листьев" дерева каталога.</p>', 0, '', 0),
(99, 12, 40, 'Checkbox', 'on_have_subcat', 'Показывать этот ресурс для всех разделов каталога', 1, '1', '<p>Если стоит галочка, то этот ресурс будет виден для всех разделов каталога.</p>\n<p>Иначе только для "листьев"</p>', 0, '', 0),
(100, 59, 66, 'Checkbox', 'visible', 'Видимая', 0, '1', '<p>Если не установлен флажок, то колонка не будет видна в списке, но останется в фильтрах.</p>', 0, '', 0),
(101, 59, 67, 'Checkbox', 'escape', 'Escape', 0, '1', '', 0, '', 0),
(105, 12, 45, 'Text', 'indexate', 'Поля для индексирования', 0, '', '<p>список полей через точку с запятой</p>', 0, '', 0),
(106, 75, 99, 'Text', 'title', 'Название пункта меню', 1, '', '', 0, '', 0),
(108, 75, 101, 'Text', 'url', 'Ссылка', 1, '', '', 0, '', 0);

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources_forms_params`
--

CREATE TABLE `z_resources_forms_params` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `formid` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `value` text NOT NULL,
  `is_eval` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `formid` (`formid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=28 ;

--
-- Дамп данных таблицы `z_resources_forms_params`
--

INSERT INTO `z_resources_forms_params` (`id`, `formid`, `title`, `value`, `is_eval`) VALUES
(1, 7, 'multiOptions', 'return array(\r\n''int''		=>	''Число'',\r\n''bool''		=>	''Да/Нет'',\r\n''string''	=>	''Строка'',\r\n''password''	=>	''Пароль'',\r\n''text''		=>	''Текст'',\r\n''file''		=>	''Файл'',\r\n''image''		=>	''Картинка'',\r\n''html''		=>	''HTML текст'');', 1),
(2, 11, 'description', '$templateDescription = '''';\r\nif (Z_Auth::getInstance()->getUser()->getRole()!=''root'' && $this->_getParam(''id''))\r\n{\r\n  $templateDescription = $this->z_model->find($this->_getParam(''id''))->current()->description;\r\n}\r\nreturn $templateDescription;', 1),
(3, 19, 'multiOptions', '$rolesModel = new Z_Model_Roles();\r\nreturn $rolesModel->fetchPairs(array(''id'',''title''),array(),''title'');', 1),
(4, 17, 'filters', 'return array(''StringTrim'');', 1),
(5, 17, 'validators', '$exclude = NULL;\r\nif ($this->_getParam(''action'')==''edit''){\r\n  $exclude = Z_Db_Table::getDefaultAdapter()->quoteInto(''id != ?'', $this->_getParam(''id''));\r\n}\r\n\r\nreturn array(\r\n  array(''StringLength'', true, array(4, 255)),\r\n  ''alnum'',\r\n  array(''db_NoRecordExists'', true, array($this->z_model->info(''name''),''login'',$exclude))\r\n);', 1),
(6, 18, 'validators', 'return array(\r\n  array(''StringLength'', true, array(6, 255)),\r\n);', 1),
(7, 21, 'validators', '$exclude = NULL;\r\nif ($this->_getParam(''action'')==''edit'')\r\n{\r\n  $exclude = Z_Db_Table::getDefaultAdapter()->quoteInto(''id != ?'', $this->_getParam(''id''));\r\n}\r\nreturn array(\r\n array(''db_NoRecordExists'', true, array($this->z_model->info(''name''),''roleId'',$exclude))\r\n);', 1),
(8, 22, 'MultiOptions', '$resourcesModel = new Z_Model_Resources();\r\nreturn $resourcesModel->fetchPairsCat();', 1),
(9, 23, 'MultiOptions', 'return array(\r\n	''Text''		=>	''Строка'',\r\n	''Autocomplete''	=>	''Автодополнение'',\r\n	''AutocompleteId''=>	''Автодополнение с выбором идентификатора'',\r\n	''Date''		=>	''Дата'',\r\n	''Textarea''	=>	''Текст'',\r\n	''Mce''		=>	''HTML редактор'',\r\n	''File''		=>	''Файл'',\r\n	''Select''	=>	''Выпадающий список'',\r\n	''Radio''		=>	''Радио-кнопка'',\r\n	''Checkbox''	=>	''Флажок'',\r\n	''MultiCheckbox''	=>	''Мультифлажок'',\r\n	''EditArea''	=>	''Редактор кода'',\r\n	''Hidden''	=>	''Скрытое поле'',\r\n	''Password''	=>	''Пароль'',\r\n	''PointPicker''	=>	''Выбор точки на картинке'',\r\n	''MultiImage''=>''Мульзагрузка картинок'',\r\n	''Multielement''=>''Наборы элементов''\r\n); ', 1),
(10, 24, 'MultiOptions', 'return array(''allow''=>''Разрешить'',''deny''=>''Запретить'');', 1),
(11, 25, 'MultiOptions', '$curRoleId = $this->_getParam($this->getResourceInfo()->resourceId.''_parentid'');\r\n$rolesModel = new Z_Model_Roles();\r\nreturn $rolesModel->fetchPairs(array(''id'',''title''),array(''id!=?''=>$curRoleId));', 1),
(12, 27, 'validators', '$exclude = NULL;\r\nif ($this->_getParam(''action'')==''edit''){\r\n  $exclude = Z_Db_Table::getDefaultAdapter()->quoteInto(''id != ?'', $this->_getParam(''id''));\r\n}\r\nreturn array(\r\n  array(''db_NoRecordExists'', true, array($this->z_model->info(''name''),''name'',$exclude))\r\n);', 1),
(13, 39, 'MultiOptions', '$options = $this->z_model->fetchPairsCat();\n$options[0] = ''Корень'';\nif ($this->_getParam(''action'')==''edit'') unset($options[$this->_getParam(''id'')]);\nreturn $options;', 1),
(14, 41, 'MultiOptions', '$models = Z_Db_Model_Generator::getAllModels();\r\n$models = array_combine($models,$models);\r\n$models[''''] = ''Нет'';\r\nreturn $models;', 1),
(15, 42, 'MultiOptions', 'return array(''band''=>''Лента'',''catalog''=>''Каталог'');', 1),
(16, 53, 'MultiOptions', 'return array(''bottom''=>''В конец'',''top''=>''В начало'');', 1),
(17, 76, 'MultiOptions', '$models = Z_Db_Model_Generator::getAllModels();\nreturn array_combine($models,$models);\n', 1),
(18, 79, 'MultiOptions', '$models = Z_Db_Model_Generator::getAllModels();\nreturn array_combine($models,$models);', 1),
(23, 55, 'MultiOptions', 'return array(\r\n	''Text''		=>	''Строка'',\r\n	''Autocomplete''	=>	''Автодополнение'',\r\n	''AutocompleteId''=>	''Автодополнение с выбором идентификатора'',\r\n	''Date''		=>	''Дата'',\r\n	''Textarea''	=>	''Текст'',\r\n	''Mce''		=>	''HTML редактор'',\r\n	''File''		=>	''Файл'',\r\n	''Select''	=>	''Выпадающий список'',\r\n	''Radio''		=>	''Радио-кнопка'',\r\n	''Checkbox''	=>	''Флажок'',\r\n	''MultiCheckbox''	=>	''Мультифлажок'',\r\n	''EditArea''	=>	''Редактор кода'',\r\n	''Hidden''	=>	''Скрытое поле'',\r\n	''Password''	=>	''Пароль'',\r\n	''PointPicker''	=>	''Выбор точки на картинке'',\r\n	''MultiImage''=>''Мульзагрузка картинок''\r\n); ', 1),
(24, 88, 'MultiOptions', 'return array(\n	''int''		=>	''int'',\n	''varchar''	=>	''varchar'',\n	''text''		=>	''text'',\n	''date''		=>	''date'',\n	''timestamp''	=>	''timestamp''\n);', 1),
(25, 89, 'validators', 'return array(\n	array(''Digits'')\n);', 1),
(26, 91, 'MultiOptions', 'return array(\n	''no''			=>	''Нет'',\n	''asdefine''		=>	''Как определено'',\n	''CURRENT_TIMESTAMP''	=>	''CURRENT_TIMESTAMP''\n);', 1),
(27, 3, 'filemanager', '1', 0);

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources_joins`
--

CREATE TABLE `z_resources_joins` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `orderid` int(11) NOT NULL,
  `resourceid` int(11) NOT NULL,
  `model` varchar(255) NOT NULL,
  `condition` varchar(255) NOT NULL,
  `fields` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `orderid` (`orderid`),
  KEY `resourceid` (`resourceid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

--
-- Дамп данных таблицы `z_resources_joins`
--

INSERT INTO `z_resources_joins` (`id`, `orderid`, `resourceid`, `model`, `condition`, `fields`) VALUES
(2, 2, 8, 'Z_Model_Roles', '{{table}}.role_id={{jointable}}.id', 'title|rolename'),
(3, 3, 19, 'Z_Model_Resources', '{{table}}.resource_id={{jointable}}.id', 'title|title'),
(4, 4, 18, 'Z_Model_Roles', '{{table}}.parent_role_id={{jointable}}.id', 'title|title');

-- --------------------------------------------------------

--
-- Структура таблицы `z_resources_refers`
--

CREATE TABLE `z_resources_refers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `resourceid` int(11) NOT NULL,
  `field` varchar(255) NOT NULL,
  `model` varchar(255) NOT NULL,
  `field1` varchar(255) NOT NULL,
  `field2` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `resourceid` (`resourceid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Дамп данных таблицы `z_resources_refers`
--

INSERT INTO `z_resources_refers` (`id`, `resourceid`, `field`, `model`, `field1`, `field2`) VALUES
(1, 19, 'privileges', 'Z_Model_Privileges_Connect', 'rule_id', 'privilege_id');

-- --------------------------------------------------------

--
-- Структура таблицы `z_roles`
--

CREATE TABLE `z_roles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `roleId` varchar(255) NOT NULL,
  `title` varchar(255) NOT NULL,
  `z_can_delete` int(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

--
-- Дамп данных таблицы `z_roles`
--

INSERT INTO `z_roles` (`id`, `roleId`, `title`, `z_can_delete`) VALUES
(1, 'guest', 'Посетитель сайта', 0),
(2, 'root', 'Суперпользователь', 0),
(3, 'admin', 'Администратор сайта', 0),
(4, 'seo_role', 'SEO Специалист', 0);

-- --------------------------------------------------------

--
-- Структура таблицы `z_roles_connect`
--

CREATE TABLE `z_roles_connect` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `child_role_id` int(11) NOT NULL,
  `parent_role_id` int(11) NOT NULL,
  `orderid` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_child_role_id` (`child_role_id`),
  KEY `fk_parent_role_id` (`parent_role_id`),
  KEY `orderid` (`orderid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_rules`
--

CREATE TABLE `z_rules` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `role_id` int(11) NOT NULL,
  `resource_id` int(11) NOT NULL,
  `rule` enum('allow','deny') DEFAULT 'deny',
  PRIMARY KEY (`id`),
  KEY `fk_roleId` (`role_id`),
  KEY `fk_resourceId` (`resource_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=49 ;

--
-- Дамп данных таблицы `z_rules`
--

INSERT INTO `z_rules` (`id`, `role_id`, `resource_id`, `rule`) VALUES
(29, 2, 50, 'allow'),
(38, 3, 11, 'deny'),
(39, 3, 13, 'deny'),
(41, 3, 24, 'allow'),
(42, 3, 53, 'allow'),
(43, 3, 22, 'deny'),
(44, 3, 31, 'allow'),
(45, 3, 57, 'deny'),
(46, 3, 74, 'allow'),
(47, 3, 32, 'allow'),
(48, 4, 32, 'allow');

-- --------------------------------------------------------

--
-- Структура таблицы `z_statpages`
--

CREATE TABLE `z_statpages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sid` varchar(255) NOT NULL,
  `crated_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `title` varchar(255) NOT NULL,
  `text` text NOT NULL,
  `z_can_delete` int(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE KEY `sid` (`sid`),
  KEY `crated_on` (`crated_on`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;

--
-- Дамп данных таблицы `z_statpages`
--

INSERT INTO `z_statpages` (`id`, `sid`, `crated_on`, `title`, `text`, `z_can_delete`) VALUES
(6, 'index', '2010-05-31 01:40:46', 'Возможности и преимущества zcmf', '<ul>\r\n<li>Быстрое создание админки сайта любой сложности.</li>\r\n<li>Возможно использовать абсолютно любые шаблоны для сайта! Никаких специфических требований к верстке. Полная свобода для дизайнера и верстальщика!</li>\r\n<li>Использование Zend Framework дает широкие возможности по расширению функционала сайта.</li>\r\n<li>Только человекопонятные URL (ЧПУ)!</li>\r\n<li>Встроенная система авторизации и распределения прав доступа.</li>\r\n<li>Встроенные инструменты для работы с изображениями (генерация превью, наложение водных знаков, использование фильтров).</li>\r\n<li>Удобная в использовании система кэширования.</li>\r\n<li>Уже есть все необходимые для SEO инструменты!</li>\r\n<li>Генерация кода для создания моделей и контроллеров админки.</li>\r\n<li>Единое хранилище загружаемых файлов.</li>\r\n<li>Интегрированный инструменты для реализации поиска на основе технологии Lucene.</li>\r\n</ul>', 0);

-- --------------------------------------------------------

--
-- Структура таблицы `z_structure`
--

CREATE TABLE `z_structure` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `orderid` int(11) DEFAULT NULL,
  `parentid` int(11) DEFAULT NULL,
  `label` varchar(255) DEFAULT NULL,
  `uri` varchar(255) DEFAULT NULL,
  `module` varchar(255) DEFAULT NULL,
  `controller` varchar(255) DEFAULT NULL,
  `action` varchar(255) DEFAULT NULL,
  `params` varchar(255) DEFAULT NULL,
  `visible` int(1) DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_titles`
--

CREATE TABLE `z_titles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `orderid` int(11) NOT NULL,
  `uri` varchar(1024) NOT NULL,
  `title` varchar(1024) NOT NULL,
  `title_block` int(1) DEFAULT '0',
  `description` varchar(1024) DEFAULT NULL,
  `description_block` int(1) DEFAULT '0',
  `keywords` varchar(1024) DEFAULT NULL,
  `keywords_block` int(1) DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `orderid` (`orderid`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Дамп данных таблицы `z_titles`
--

INSERT INTO `z_titles` (`id`, `orderid`, `uri`, `title`, `title_block`, `description`, `description_block`, `keywords`, `keywords_block`) VALUES
(1, 1, '/', 'Сайт разработан студией MADE7', 0, 'Сайт разработан студией MADE7', 0, 'Сайт разработан студией MADE7', 0);

-- --------------------------------------------------------

--
-- Структура таблицы `z_updates`
--

CREATE TABLE `z_updates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `install_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `uid` varchar(255) NOT NULL,
  `descr` text,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=70 ;

--
-- Дамп данных таблицы `z_updates`
--

INSERT INTO `z_updates` (`id`, `install_date`, `uid`, `descr`) VALUES
(41, '2012-01-24 16:34:06', 'update_21_01_2012_14_41_54_YWI4YmZjYWJjNWFlYTBkNzc0YWE2MjIwZGIxOWJmYTg=.dat', 'Z_Updates newest'),
(49, '2012-03-15 13:58:07', 'update_24_01_2012_17_36_58_NGE4M2YxODBhYzVlNDkzMDJkOTQ2N2QyMGMxMmJjMjQ=.dat', 'Список обновлений с радиокнопками'),
(43, '2012-01-24 16:34:13', 'update_24_01_2012_17_14_10_YWI4YmZjYWJjNWFlYTBkNzc0YWE2MjIwZGIxOWJmYTg=.dat', 'Сортированный список обновлений'),
(44, '2012-01-24 16:34:19', 'update_22_01_2012_16_45_35_OTUwYzQyZjY3Zjc2YjgzOWI0M2Q2YjE2MDc1NTQ2NDg=.dat', 'Images Multiload (!!!after install refresh the page!!!)'),
(45, '2012-01-24 16:34:23', 'update_23_01_2012_16_58_35_NmE2MTMwYjVkMjkwNzNiZTc0YzBiYjY5YzU2YTUxYzg=.dat', 'Разные полезные обновления'),
(46, '2012-01-24 16:34:26', 'update_24_01_2012_01_32_13_ZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2U=.dat', 'Критическое удаление уязвимости elfinder'),
(47, '2012-01-24 16:41:01', 'update_24_01_2012_19_40_15_OGUxNDk3ZTJjMzc5YmZmYjczY2RmOWQ0NjI5ZmE5NGU=.dat', 'Новый хелпер z_config для работы с новым классом Z_Config'),
(48, '2012-01-28 08:53:00', 'update_28_01_2012_11_50_16_OGYyZGVmYWY1NTVhNDNjY2M1ODYyM2IzZTU0MzQ2MGU=.dat', 'Класс Z_DomainName для определения доменов разных уровней'),
(50, '2012-03-15 13:58:28', 'update_10_02_2012_10_32_35_NzI2ZDQ3NzZjZmU3YjI1MGNkMjk0NjNiMjA2NGQ0MGE=.dat', 'Теперь письма можно отправлять с параметром fromName, чтобы указывать вместо отправителя его имя'),
(51, '2012-03-15 13:58:32', 'update_17_02_2012_19_01_31_ZmQ5ZWRjNGEzZjA5M2E2OWU1NGUwYTgwNDg4YjJlOGU=.dat', 'Z_Db_Table добавлены методы fetchTriples, и в метод fetchPairs добавлен 4 параметр zerofill при включении которого первым элементом выдаваемого массива становится пустышка с индексом 0 и заголовком "Не задано..."'),
(52, '2012-07-06 10:32:12', 'update_16_03_2012_19_58_39_Y2MxZGUzNjI3NTMwYjVmYTMzZTUzNzVhNWUzOGEzNzE=.dat', 'Добавление в админку возможности фильтрации элементов по нескольким значениям фильтра в соответствии со схемой field IN (?).'),
(53, '2012-07-06 10:32:23', 'update_30_03_2012_18_53_55_M2I4MjU0Y2QyOGYxZjY2ZmQzOGM4YzUwZTRkZGUxM2U=.dat', 'Снимаем галочку по умолчанию "удалять файл" для всех добавляемых на форму элементов. При включенной галочке на элементах формы, которые не являются файлами, происходит случайное физическое удаление файлов!'),
(54, '2012-07-06 10:32:33', 'update_30_03_2012_19_19_41_MWU3NTkzZWQxYWFmMTFjYjljZjk1ZTU2Y2Q5MGZhMjU=.dat', 'У всех элементов формы админки устанавливаем галочку "удалять файл при удалении элемента", которая была переименована в "файловый тип" и которые связаны с работой файлового хранилища Z_File_Storage и снимаем эту галочку у тех, которые не являются файловыми типами и не связаны с работой файлового хранилища. При установки этой галочки у элемента нефайлового типа, при удалении этого элемента в админке будет удаляться файл с id, соответствующий значению поля файлового типа, например при удалении элемента из ленты у которого флаг "включен" отмечен как файловый тип, из файлового хранилища будет удаляться файл с id=1 или =0 в зависимости от значения этой галочки для удаляемого элемента ленты.'),
(55, '2012-07-06 10:32:39', 'update_31_03_2012_10_09_51_YWI4YmZjYWJjNWFlYTBkNzc0YWE2MjIwZGIxOWJmYTg=.dat', 'Добавлена функция интерпретация инструкций php в систему обновлений Z_Updates'),
(56, '2012-07-06 10:32:46', 'update_04_04_2012_00_58_29_NzI2ZDQ3NzZjZmU3YjI1MGNkMjk0NjNiMjA2NGQ0MGE=.dat', 'Обновление Z_Mail_Mailer - меняем кодировку аттачей на base64'),
(57, '2012-07-06 10:32:50', 'update_18_04_2012_01_04_13_YWI4YmZjYWJjNWFlYTBkNzc0YWE2MjIwZGIxOWJmYTg=.dat', 'Обновление Z_Updates.php - исправлена ошибка игнорирования символов перевода строки, теперь они заменяются на настоящие символы перевода строки'),
(58, '2012-07-06 10:32:54', 'update_19_04_2012_02_07_12_YzU5OWI5MzllOWZjYzVjYWNkNzQyNTMxZjEwMGIwNjk=.dat', 'Создание резервных копий'),
(59, '2012-07-06 10:32:58', 'update_19_04_2012_02_09_56_Y2RlYWYwZjk5ODJkM2VkMmE5ODE0MjQ3NjE5YTkzZWE=.dat', 'Добавление в админку пункта меню для создания резервных копий'),
(60, '2012-07-06 10:33:02', 'update_21_04_2012_01_42_35_YWI4YmZjYWJjNWFlYTBkNzc0YWE2MjIwZGIxOWJmYTg=.dat', 'Работающая сортировка списка обновлений'),
(61, '2012-07-06 10:33:07', 'update_23_04_2012_12_07_17_ZDI1M2VlYTk3MzYwMGE3NmRkNGJkNDYwZGQ0NTQ1YjQ=.dat', 'Новый тип элементов - множественный выбор с кнопками'),
(62, '2012-07-06 10:33:11', 'update_23_04_2012_01_32_04_ZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2U=.dat', 'В абстрактном контроллере админки вызываем метод довалидации экшена'),
(63, '2012-07-06 10:33:14', 'update_23_04_2012_02_30_15_ZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2U=.dat', 'Добавление в index.php инструкции date_default_timezone_set'),
(64, '2012-07-06 10:33:24', 'update_23_04_2012_15_44_08_ZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2U=.dat', 'Для контроллера админки добавляем вместо явного указания метода list метод this->z_defaultAction'),
(65, '2012-07-06 10:33:37', 'update_23_04_2012_01_31_13_ZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2U=.dat', 'В абстрактный контроллер админки добавляем новый абстрактный метод довалидации экшена'),
(66, '2012-07-06 10:33:54', 'update_23_04_2012_01_29_01_YWI4YmZjYWJjNWFlYTBkNzc0YWE2MjIwZGIxOWJmYTg=.dat', 'Обновление Z_Updates - вместо замены на \\n используем константу PHP_EOL'),
(67, '2012-07-06 10:33:57', 'update_25_04_2012_13_05_26_ZWFmMTZjZTZlMmQxNDkzMzYyMmFmYjM3M2UyZjI4ZDA=.dat', 'Система резервного копирования - сброс состояния прогрессбара, к имени файла добавляется имя сайта.'),
(68, '2012-07-06 10:34:00', 'update_27_06_2012_19_42_57_YWI4YmZjYWJjNWFlYTBkNzc0YWE2MjIwZGIxOWJmYTg=.dat', 'Устраняем глюк на ограничение длины у функции preg_match_all инсталлятора обновлений'),
(69, '2012-07-06 10:34:05', 'update_28_06_2012_19_16_44_NzliYmUzM2YyZDA1ODYzYTIxYzI1MGQyMWIzNzU3YmU=.dat', 'Adminer for managing db');

-- --------------------------------------------------------

--
-- Структура таблицы `z_upload`
--

CREATE TABLE `z_upload` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `realname` varchar(255) NOT NULL,
  `path` varchar(255) NOT NULL,
  `name` varchar(255) NOT NULL DEFAULT '',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Структура таблицы `z_users`
--

CREATE TABLE `z_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `login` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `role_id` int(11) NOT NULL,
  `z_can_delete` int(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  KEY `fk_z_users_z_roles1` (`role_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

--
-- Дамп данных таблицы `z_users`
--

INSERT INTO `z_users` (`id`, `login`, `password`, `role_id`, `z_can_delete`) VALUES
(1, 'guest', '7b9f4e78ce9b50235cf35aee4372062e:iJb5tIu9HUA2XPoFl1BTx4vV6egsjz3G', 1, 0),
(2, 'root', '6675a2d6cf9506c94100ab31ea316164:Y1JnCDVSGM59OBHZx6XujTtRmpkNh7lK', 2, 0),
(3, 'admin', '02e8b6032b7869e6259511c0ccd2d80b:KZsJcFhIltnBdirfXDbjuzo9TAYakE8M', 3, 0);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
